<h1>Informations patient</h1>
<div *ngIf="showSpinner" class="spinner-border"></div>
<div class="section-card blue-medium w-100" *ngIf="!showSpinner && errorUpdatingBy">
    <div class="d-flex flex-column">
        <h2>Aïe !</h2>
        <span>Ce patient est en cours de modification un(e) de vos collègues...</span>
        <span>
            Pleins d'autres tests sont à saisir <a routerLink="/take-patient">juste ici !</a>
        </span>
    </div>
</div>
<div *ngIf="!showSpinner && !errorUpdatingBy" class="center">
    <div class="person-round">{{ patient['firstName'][0] + patient['lastName'][0] }}</div>
    <div class="section-card blue-medium w-100 m-0">
        <div>
            <i class="bi bi-person-fill"></i>
            <span>{{ patient['firstName'] }} </span>
            <span>{{ patient['lastName'] }}</span>
        </div>
        <div>
            <i class="bi bi-calendar-day-fill"></i>
            <span>{{ patient['birth'] }}</span>
        </div>
        <div>
            <i class="bi bi-envelope-fill"></i>
            <span>{{ patient['mail'] }}</span>
        </div>
        <div>
            <i class="bi bi-telephone-fill"></i>
            <span>{{ patient['phone'] }}</span>
        </div>
        <div>
            <i class="bi bi-house-fill"></i>
            <span>{{ patient['street'] }} {{ patient['zip'] }} {{ patient['city'] }}</span>
        </div>
        <div>
            <fa-icon [icon]="nir"></fa-icon>
            <span>{{ patient['nir'] }}</span>
        </div>
    </div>
    <ng-container *ngFor="let test of patient['detectionTest']">
        <div class="section-card white hover w-100 detection-test d-flex align-items-center justify-content-between">
            <div class="d-flex flex-column justify-content-center">
                <h5>Testé le {{ test['frenchTestedAt'] }}</h5>
                <div *ngIf="test['isNegative'] !== null">
                    <fa-icon [icon]="faHandHoldingMedical"></fa-icon>
                    <span class="result">Résultat
                        <ng-container *ngIf="test['isNegative']">
                            <span class="badge rounded-pill bg-light text-dark">Négatif</span>
                        </ng-container>
                        <ng-container *ngIf="!test['isNegative']">
                            <span class="badge rounded-pill bg-danger">Positif</span>
                        </ng-container>
                    </span>
                </div>
            </div>
            <div>
                <button *ngIf="!test['isInvoiced']" class="blue-medium">
                    <i class="bi bi-pen"></i>
                    Saisir ce test
                </button>
            </div>
        </div>
    </ng-container>
    <!--<div class="mt-5 col-6 d-flex flex-column section-card blue m-0 align-self-start">
        <form [formGroup]="dateForm">
            <h2>Ce patient a-t-il été facturé ?</h2>
            <div class="d-flex align-items-center justify-content-between col-6">
                <button class="white col-10 me-2 mb-0" (click)="onSubmit()">
                    Non <small>puis enregistrer</small>
                </button>
                <button (click)="showDate()" class="blue-dark col-10">Oui</button>
            </div>
            <div [ngClass]="isDateActive ? 'is-active' : ''" class="date-section mt-3">
                <h3>Quand a-t-il été facturé ?<small>(Optionel)</small></h3>
                <input type="text" class="col-6" placeholder="Ajourd'hui" bsDatepicker formControlName="filledAt" placement="right" [bsConfig]="bsConfig" />
                <div class="d-flex justify-content-end col-6">
                    <button class="blue-dark col-12" (click)="onSubmit()">
                        <i *ngIf="!showButtonSpinner" class="bi bi-save"></i>
                        <div *ngIf="showButtonSpinner" class="spinner-border"></div>
                        Enregistrer
                    </button>
                </div>
            </div>
        </form>
    </div>-->
</div>